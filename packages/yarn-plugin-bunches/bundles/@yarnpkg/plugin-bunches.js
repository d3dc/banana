/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-bunches",
factory: function (require) {
var plugin=(()=>{var vi=Object.create,At=Object.defineProperty,ki=Object.defineProperties,_i=Object.getOwnPropertyDescriptor,Ci=Object.getOwnPropertyDescriptors,wi=Object.getOwnPropertyNames,Dr=Object.getOwnPropertySymbols,Ti=Object.getPrototypeOf,jr=Object.prototype.hasOwnProperty,xi=Object.prototype.propertyIsEnumerable;var $r=(t,e,r)=>e in t?At(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bt=(t,e)=>{for(var r in e||(e={}))jr.call(e,r)&&$r(t,r,e[r]);if(Dr)for(var r of Dr(e))xi.call(e,r)&&$r(t,r,e[r]);return t},Jt=(t,e)=>ki(t,Ci(e)),Ri=t=>At(t,"__esModule",{value:!0});var b=t=>{if(typeof require!="undefined")return require(t);throw new Error('Dynamic require of "'+t+'" is not supported')};var Fi=(t,e)=>()=>(t&&(e=t(t=0)),e),G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ur=(t,e)=>{for(var r in e)At(t,r,{get:e[r],enumerable:!0})},Pi=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of wi(e))!jr.call(t,n)&&n!=="default"&&At(t,n,{get:()=>e[n],enumerable:!(r=_i(e,n))||r.enumerable});return t},k=t=>Pi(Ri(At(t!=null?vi(Ti(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Ae=G((Ll,qr)=>{var vt=1e3,kt=vt*60,_t=kt*60,ht=_t*24,Oi=ht*7,Ai=ht*365.25;qr.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Ni(t);if(r==="number"&&isFinite(t))return e.long?Ii(t):Mi(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Ni(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Ai;case"weeks":case"week":case"w":return r*Oi;case"days":case"day":case"d":return r*ht;case"hours":case"hour":case"hrs":case"hr":case"h":return r*_t;case"minutes":case"minute":case"mins":case"min":case"m":return r*kt;case"seconds":case"second":case"secs":case"sec":case"s":return r*vt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Mi(t){var e=Math.abs(t);return e>=ht?Math.round(t/ht)+"d":e>=_t?Math.round(t/_t)+"h":e>=kt?Math.round(t/kt)+"m":e>=vt?Math.round(t/vt)+"s":t+"ms"}function Ii(t){var e=Math.abs(t);return e>=ht?Xt(t,e,ht,"day"):e>=_t?Xt(t,e,_t,"hour"):e>=kt?Xt(t,e,kt,"minute"):e>=vt?Xt(t,e,vt,"second"):t+" ms"}function Xt(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var Ne=G((Dl,Wr)=>{function Bi(t){r.debug=r,r.default=r,r.coerce=p,r.disable=o,r.enable=s,r.enabled=u,r.humanize=Ae(),r.destroy=d,Object.keys(t).forEach(i=>{r[i]=t[i]}),r.names=[],r.skips=[],r.formatters={};function e(i){let c=0;for(let h=0;h<i.length;h++)c=(c<<5)-c+i.charCodeAt(h),c|=0;return r.colors[Math.abs(c)%r.colors.length]}r.selectColor=e;function r(i){let c,h=null,m,N;function F(...R){if(!F.enabled)return;let M=F,X=Number(new Date),Et=X-(c||X);M.diff=Et,M.prev=c,M.curr=X,c=X,R[0]=r.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let Z=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(ot,St)=>{if(ot==="%%")return"%";Z++;let ft=r.formatters[St];if(typeof ft=="function"){let Ot=R[Z];ot=ft.call(M,Ot),R.splice(Z,1),Z--}return ot}),r.formatArgs.call(M,R),(M.log||r.log).apply(M,R)}return F.namespace=i,F.useColors=r.useColors(),F.color=r.selectColor(i),F.extend=n,F.destroy=r.destroy,Object.defineProperty(F,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==r.namespaces&&(m=r.namespaces,N=r.enabled(i)),N),set:R=>{h=R}}),typeof r.init=="function"&&r.init(F),F}function n(i,c){let h=r(this.namespace+(typeof c=="undefined"?":":c)+i);return h.log=this.log,h}function s(i){r.save(i),r.namespaces=i,r.names=[],r.skips=[];let c,h=(typeof i=="string"?i:"").split(/[\s,]+/),m=h.length;for(c=0;c<m;c++)!h[c]||(i=h[c].replace(/\*/g,".*?"),i[0]==="-"?r.skips.push(new RegExp("^"+i.substr(1)+"$")):r.names.push(new RegExp("^"+i+"$")))}function o(){let i=[...r.names.map(a),...r.skips.map(a).map(c=>"-"+c)].join(",");return r.enable(""),i}function u(i){if(i[i.length-1]==="*")return!0;let c,h;for(c=0,h=r.skips.length;c<h;c++)if(r.skips[c].test(i))return!1;for(c=0,h=r.names.length;c<h;c++)if(r.names[c].test(i))return!0;return!1}function a(i){return i.toString().substring(2,i.toString().length-2).replace(/\.\*\?$/,"*")}function p(i){return i instanceof Error?i.stack||i.message:i}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Wr.exports=Bi});var zr=G((q,Zt)=>{q.formatArgs=Di;q.save=ji;q.load=$i;q.useColors=Li;q.storage=Ui();q.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();q.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Li(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Di(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Zt.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}q.log=console.debug||console.log||(()=>{});function ji(t){try{t?q.storage.setItem("debug",t):q.storage.removeItem("debug")}catch(e){}}function $i(){let t;try{t=q.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Ui(){try{return localStorage}catch(t){}}Zt.exports=Ne()(q);var{formatters:Gi}=Zt.exports;Gi.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Be={};Ur(Be,{createSupportsColor:()=>Ie,default:()=>Vi});function Y(t,e=te.default.argv){let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}function qi(){if("FORCE_COLOR"in A)return A.FORCE_COLOR==="true"?1:A.FORCE_COLOR==="false"?0:A.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(A.FORCE_COLOR,10),3)}function Wi(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function zi(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=qi();n!==void 0&&(ee=n);let s=r?ee:n;if(s===0)return 0;if(r){if(Y("color=16m")||Y("color=full")||Y("color=truecolor"))return 3;if(Y("color=256"))return 2}if(t&&!e&&s===void 0)return 0;let o=s||0;if(A.TERM==="dumb")return o;if(te.default.platform==="win32"){let u=Hr.default.release().split(".");return Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in A)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(u=>u in A)||A.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in A)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(A.TEAMCITY_VERSION)?1:0;if("TF_BUILD"in A&&"AGENT_NAME"in A)return 1;if(A.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in A){let u=Number.parseInt((A.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(A.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(A.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(A.TERM)||"COLORTERM"in A?1:o}function Ie(t,e={}){let r=zi(t,bt({streamIsTTY:t&&t.isTTY},e));return Wi(r)}var te,Hr,Me,A,ee,Hi,Vi,Le=Fi(()=>{te=k(b("node:process")),Hr=k(b("node:os")),Me=k(b("node:tty"));({env:A}=te.default);Y("no-color")||Y("no-colors")||Y("color=false")||Y("color=never")?ee=0:(Y("color")||Y("colors")||Y("color=true")||Y("color=always"))&&(ee=1);Hi={stdout:Ie({isTTY:Me.default.isatty(1)}),stderr:Ie({isTTY:Me.default.isatty(2)})},Vi=Hi});var Qr=G((I,ne)=>{var Qi=b("tty"),re=b("util");I.init=ea;I.log=Xi;I.formatArgs=Ki;I.save=Zi;I.load=ta;I.useColors=Yi;I.destroy=re.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");I.colors=[6,2,3,4,5,1];try{let t=(Le(),Be);t&&(t.stderr||t).level>=2&&(I.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}I.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Yi(){return"colors"in I.inspectOpts?Boolean(I.inspectOpts.colors):Qi.isatty(process.stderr.fd)}function Ki(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="[3"+(n<8?n:"8;5;"+n),o=`  ${s};1m${e} [0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(s+"m+"+ne.exports.humanize(this.diff)+"[0m")}else t[0]=Ji()+e+" "+t[0]}function Ji(){return I.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Xi(...t){return process.stderr.write(re.format(...t)+`
`)}function Zi(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function ta(){return process.env.DEBUG}function ea(t){t.inspectOpts={};let e=Object.keys(I.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=I.inspectOpts[e[r]]}ne.exports=Ne()(I);var{formatters:Vr}=ne.exports;Vr.o=function(t){return this.inspectOpts.colors=this.useColors,re.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Vr.O=function(t){return this.inspectOpts.colors=this.useColors,re.inspect(t,this.inspectOpts)}});var Yr=G((jl,De)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?De.exports=zr():De.exports=Qr()});var Kr=G(W=>{"use strict";var ra=W&&W.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(W,"__esModule",{value:!0});var na=b("fs"),sa=ra(Yr()),Ct=sa.default("@kwsites/file-exists");function oa(t,e,r){Ct("checking %s",t);try{let n=na.statSync(t);return n.isFile()&&e?(Ct("[OK] path represents a file"),!0):n.isDirectory()&&r?(Ct("[OK] path represents a directory"),!0):(Ct("[FAIL] path represents something other than a file or directory"),!1)}catch(n){if(n.code==="ENOENT")return Ct("[FAIL] path is not accessible: %o",n),!1;throw Ct("[FATAL] %o",n),n}}function ia(t,e=W.READABLE){return oa(t,(e&W.FILE)>0,(e&W.FOLDER)>0)}W.exists=ia;W.FILE=1;W.FOLDER=2;W.READABLE=W.FILE+W.FOLDER});var Jr=G(se=>{"use strict";function aa(t){for(var e in t)se.hasOwnProperty(e)||(se[e]=t[e])}Object.defineProperty(se,"__esModule",{value:!0});aa(Kr())});var $e=G(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.createDeferred=dt.deferred=void 0;function je(){let t,e,r="pending";return{promise:new Promise((s,o)=>{t=s,e=o}),done(s){r==="pending"&&(r="resolved",t(s))},fail(s){r==="pending"&&(r="rejected",e(s))},get fulfilled(){return r!=="pending"},get status(){return r}}}dt.deferred=je;dt.createDeferred=je;dt.default=je});var Ue=G((ql,Xr)=>{function ca(t){r.debug=r,r.default=r,r.coerce=p,r.disable=o,r.enable=s,r.enabled=u,r.humanize=Ae(),r.destroy=d,Object.keys(t).forEach(i=>{r[i]=t[i]}),r.names=[],r.skips=[],r.formatters={};function e(i){let c=0;for(let h=0;h<i.length;h++)c=(c<<5)-c+i.charCodeAt(h),c|=0;return r.colors[Math.abs(c)%r.colors.length]}r.selectColor=e;function r(i){let c,h=null,m,N;function F(...R){if(!F.enabled)return;let M=F,X=Number(new Date),Et=X-(c||X);M.diff=Et,M.prev=c,M.curr=X,c=X,R[0]=r.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let Z=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(ot,St)=>{if(ot==="%%")return"%";Z++;let ft=r.formatters[St];if(typeof ft=="function"){let Ot=R[Z];ot=ft.call(M,Ot),R.splice(Z,1),Z--}return ot}),r.formatArgs.call(M,R),(M.log||r.log).apply(M,R)}return F.namespace=i,F.useColors=r.useColors(),F.color=r.selectColor(i),F.extend=n,F.destroy=r.destroy,Object.defineProperty(F,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==r.namespaces&&(m=r.namespaces,N=r.enabled(i)),N),set:R=>{h=R}}),typeof r.init=="function"&&r.init(F),F}function n(i,c){let h=r(this.namespace+(typeof c=="undefined"?":":c)+i);return h.log=this.log,h}function s(i){r.save(i),r.namespaces=i,r.names=[],r.skips=[];let c,h=(typeof i=="string"?i:"").split(/[\s,]+/),m=h.length;for(c=0;c<m;c++)!h[c]||(i=h[c].replace(/\*/g,".*?"),i[0]==="-"?r.skips.push(new RegExp("^"+i.substr(1)+"$")):r.names.push(new RegExp("^"+i+"$")))}function o(){let i=[...r.names.map(a),...r.skips.map(a).map(c=>"-"+c)].join(",");return r.enable(""),i}function u(i){if(i[i.length-1]==="*")return!0;let c,h;for(c=0,h=r.skips.length;c<h;c++)if(r.skips[c].test(i))return!1;for(c=0,h=r.names.length;c<h;c++)if(r.names[c].test(i))return!0;return!1}function a(i){return i.toString().substring(2,i.toString().length-2).replace(/\.\*\?$/,"*")}function p(i){return i instanceof Error?i.stack||i.message:i}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Xr.exports=ca});var Zr=G((z,oe)=>{z.formatArgs=la;z.save=pa;z.load=fa;z.useColors=ua;z.storage=ha();z.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();z.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ua(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function la(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+oe.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}z.log=console.debug||console.log||(()=>{});function pa(t){try{t?z.storage.setItem("debug",t):z.storage.removeItem("debug")}catch(e){}}function fa(){let t;try{t=z.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function ha(){try{return localStorage}catch(t){}}oe.exports=Ue()(z);var{formatters:da}=oe.exports;da.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var en=G((B,ae)=>{var ma=b("tty"),ie=b("util");B.init=Ca;B.log=va;B.formatArgs=ya;B.save=ka;B.load=_a;B.useColors=ga;B.destroy=ie.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");B.colors=[6,2,3,4,5,1];try{let t=(Le(),Be);t&&(t.stderr||t).level>=2&&(B.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}B.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function ga(){return"colors"in B.inspectOpts?Boolean(B.inspectOpts.colors):ma.isatty(process.stderr.fd)}function ya(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="[3"+(n<8?n:"8;5;"+n),o=`  ${s};1m${e} [0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(s+"m+"+ae.exports.humanize(this.diff)+"[0m")}else t[0]=ba()+e+" "+t[0]}function ba(){return B.inspectOpts.hideDate?"":new Date().toISOString()+" "}function va(...t){return process.stderr.write(ie.format(...t)+`
`)}function ka(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function _a(){return process.env.DEBUG}function Ca(t){t.inspectOpts={};let e=Object.keys(B.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=B.inspectOpts[e[r]]}ae.exports=Ue()(B);var{formatters:tn}=ae.exports;tn.o=function(t){return this.inspectOpts.colors=this.useColors,ie.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};tn.O=function(t){return this.inspectOpts.colors=this.useColors,ie.inspect(t,this.inspectOpts)}});var rn=G((Wl,Ge)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ge.exports=Zr():Ge.exports=en()});var Lo=G((zl,Bo)=>{var wa=Object.create,Nt=Object.defineProperty,Ta=Object.defineProperties,xa=Object.getOwnPropertyDescriptor,Ra=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertyNames,nn=Object.getOwnPropertySymbols,Fa=Object.getPrototypeOf,sn=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,on=(t,e,r)=>e in t?Nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rt=(t,e)=>{for(var r in e||(e={}))sn.call(e,r)&&on(t,r,e[r]);if(nn)for(var r of nn(e))Pa.call(e,r)&&on(t,r,e[r]);return t},We=(t,e)=>Ta(t,Ra(e)),an=t=>Nt(t,"__esModule",{value:!0}),f=(t,e)=>function(){return t&&(e=(0,t[qe(t)[0]])(t=0)),e},Ea=(t,e)=>function(){return e||(0,t[qe(t)[0]])((e={exports:{}}).exports,e),e.exports},P=(t,e)=>{for(var r in e)Nt(t,r,{get:e[r],enumerable:!0})},cn=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of qe(e))!sn.call(t,s)&&(r||s!=="default")&&Nt(t,s,{get:()=>e[s],enumerable:!(n=xa(e,s))||n.enumerable});return t},Sa=(t,e)=>cn(an(Nt(t!=null?wa(Fa(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),E=(t=>(e,r)=>t&&t.get(e)||(r=cn(an({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0),Mt=(t,e,r)=>new Promise((n,s)=>{var o=p=>{try{a(r.next(p))}catch(d){s(d)}},u=p=>{try{a(r.throw(p))}catch(d){s(d)}},a=p=>p.done?n(p.value):Promise.resolve(p.value).then(o,u);a((r=r.apply(t,e)).next())}),nt,ct=f({"src/lib/errors/git-error.ts"(){nt=class extends Error{constructor(t,e){super(e);this.task=t,Object.setPrototypeOf(this,new.target.prototype)}}}}),mt,wt=f({"src/lib/errors/git-response-error.ts"(){ct(),mt=class extends nt{constructor(t,e){super(void 0,e||String(t));this.git=t}}}}),ze,Oa=f({"src/lib/errors/git-construct-error.ts"(){ct(),ze=class extends nt{constructor(t,e){super(void 0,e);this.config=t}}}}),He,un=f({"src/lib/errors/git-plugin-error.ts"(){ct(),He=class extends nt{constructor(t,e,r){super(t,r);this.task=t,this.plugin=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),Ve,ln=f({"src/lib/errors/task-configuration-error.ts"(){ct(),Ve=class extends nt{constructor(t){super(void 0,t)}}}});function pn(t){return typeof t=="function"?t:yt}function fn(t){return typeof t=="function"&&t!==yt}function hn(t,e){let r=t.indexOf(e);return r<=0?[t,""]:[t.substr(0,r),t.substr(r+1)]}function dn(t,e=0){return mn(t)&&t.length>e?t[e]:void 0}function gt(t,e=0){if(mn(t)&&t.length>e)return t[t.length-1-e]}function mn(t){return!!(t&&typeof t.length=="number")}function It(t="",e=!0,r=`
`){return t.split(r).reduce((n,s)=>{let o=e?s.trim():s;return o&&n.push(o),n},[])}function Qe(t,e){return It(t,!0).map(r=>e(r))}function Ye(t){return(0,Xe.exists)(t,Xe.FOLDER)}function w(t,e){return Array.isArray(t)?t.includes(e)||t.push(e):t.add(e),e}function gn(t,e){return Array.isArray(t)&&!t.includes(e)&&t.push(e),t}function Ke(t,e){if(Array.isArray(t)){let r=t.indexOf(e);r>=0&&t.splice(r,1)}else t.delete(e);return e}function Bt(t){return Array.isArray(t)?t:[t]}function yn(t){return Bt(t).map(String)}function tt(t,e=0){if(t==null)return e;let r=parseInt(t,10);return isNaN(r)?e:r}function ce(t,e){let r=[];for(let n=0,s=t.length;n<s;n++)r.push(e,t[n]);return r}function Lt(t){return(Array.isArray(t)?Buffer.concat(t):t).toString("utf-8")}function bn(t,e){return Object.assign({},...e.map(r=>r in t?{[r]:t[r]}:{}))}function Je(t=0){return new Promise(e=>setTimeout(e,t))}var Xe,Ze,yt,Dt,ue=f({"src/lib/utils/util.ts"(){Xe=Jr(),Ze="\0",yt=()=>{},Dt=Object.prototype.toString.call.bind(Object.prototype.toString)}});function ut(t,e,r){return e(t)?t:arguments.length>2?r:void 0}function tr(t,e){return/number|string|boolean/.test(typeof t)&&(!e||!e.includes(typeof t))}function er(t){return!!t&&Dt(t)==="[object Object]"}function vn(t){return typeof t=="function"}var le,U,kn,_n,rr,Cn=f({"src/lib/utils/argument-filters.ts"(){ue(),le=t=>Array.isArray(t),U=t=>typeof t=="string",kn=t=>Array.isArray(t)&&t.every(U),_n=t=>U(t)||Array.isArray(t)&&t.every(U),rr=t=>t==null||"number|boolean|function".includes(typeof t)?!1:Array.isArray(t)||typeof t=="string"||typeof t.length=="number"}}),nr,Aa=f({"src/lib/utils/exit-codes.ts"(){nr=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.ERROR=1]="ERROR",t[t.UNCLEAN=128]="UNCLEAN",t))(nr||{})}}),jt,Na=f({"src/lib/utils/git-output-streams.ts"(){jt=class{constructor(t,e){this.stdOut=t,this.stdErr=e}asStrings(){return new jt(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),T,lt,Ma=f({"src/lib/utils/line-parser.ts"(){T=class{constructor(t,e){this.matches=[],this.parse=(r,n)=>(this.resetMatches(),this._regExp.every((s,o)=>this.addMatch(s,o,r(o)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(t)?t:[t],e&&(this.useMatches=e)}useMatches(t,e){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(t,e,r){let n=r&&t.exec(r);return n&&this.pushMatch(e,n),!!n}pushMatch(t,e){this.matches.push(...e.slice(1))}},lt=class extends T{addMatch(t,e,r){return/^remote:\s/.test(String(r))&&super.addMatch(t,e,r)}pushMatch(t,e){(t>0||e.length>1)&&super.pushMatch(t,e)}}}});function wn(...t){let e=process.cwd(),r=Object.assign(rt({baseDir:e},Tn),...t.filter(n=>typeof n=="object"&&n));return r.baseDir=r.baseDir||e,r}var Tn,Ia=f({"src/lib/utils/simple-git-options.ts"(){Tn={binary:"git",maxConcurrentProcesses:5,config:[]}}});function sr(t,e=[]){return er(t)?Object.keys(t).reduce((r,n)=>{let s=t[n];return tr(s,["boolean"])?r.push(n+"="+s):r.push(n),r},e):e}function pt(t,e=0,r=!1){let n=[];for(let s=0,o=e<0?t.length:e;s<o;s++)"string|number".includes(typeof t[s])&&n.push(String(t[s]));return sr(or(t),n),r||n.push(...Ba(t)),n}function Ba(t){let e=typeof gt(t)=="function";return ut(gt(t,e?1:0),le,[])}function or(t){let e=vn(gt(t));return ut(gt(t,e?1:0),er)}function D(t,e=!0){let r=pn(gt(t));return e||fn(r)?r:void 0}var La=f({"src/lib/utils/task-options.ts"(){Cn(),ue()}});function ir(t,e){return t(e.stdOut,e.stdErr)}function et(t,e,...r){return r.forEach(n=>{for(let s=It(n),o=0,u=s.length;o<u;o++){let a=(p=0)=>{if(!(o+p>=u))return s[o+p]};e.some(({parse:p})=>p(a,t))}}),t}var Da=f({"src/lib/utils/task-parser.ts"(){ue()}}),xn={};P(xn,{ExitCodes:()=>nr,GitOutputStreams:()=>jt,LineParser:()=>T,NOOP:()=>yt,NULL:()=>Ze,RemoteLineParser:()=>lt,append:()=>w,appendTaskOptions:()=>sr,asArray:()=>Bt,asFunction:()=>pn,asNumber:()=>tt,asStringArray:()=>yn,bufferToString:()=>Lt,callTaskParser:()=>ir,createInstanceConfig:()=>wn,delay:()=>Je,filterArray:()=>le,filterFunction:()=>vn,filterHasLength:()=>rr,filterPlainObject:()=>er,filterPrimitives:()=>tr,filterString:()=>U,filterStringArray:()=>kn,filterStringOrStringArray:()=>_n,filterType:()=>ut,first:()=>dn,folderExists:()=>Ye,forEachLineWithContent:()=>Qe,getTrailingOptions:()=>pt,including:()=>gn,isUserFunction:()=>fn,last:()=>gt,objectToString:()=>Dt,parseStringResponse:()=>et,pick:()=>bn,prefixedArray:()=>ce,remove:()=>Ke,splitOn:()=>hn,toLinesWithContent:()=>It,trailingFunctionArgument:()=>D,trailingOptionsArgument:()=>or});var v=f({"src/lib/utils/index.ts"(){Cn(),Aa(),Na(),Ma(),Ia(),La(),Da(),ue()}}),Rn={};P(Rn,{CheckRepoActions:()=>pe,checkIsBareRepoTask:()=>Pn,checkIsRepoRootTask:()=>Fn,checkIsRepoTask:()=>ja});function ja(t){switch(t){case"bare":return Pn();case"root":return Fn()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:fe,parser:ar}}function Fn(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:fe,parser(e){return/^\.(git)?$/.test(e.trim())}}}function Pn(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:fe,parser:ar}}function $a(t){return/(Not a git repository|Kein Git-Repository)/i.test(String(t))}var pe,fe,ar,En=f({"src/lib/tasks/check-is-repo.ts"(){v(),pe=(t=>(t.BARE="bare",t.IN_TREE="tree",t.IS_REPO_ROOT="root",t))(pe||{}),fe=({exitCode:t},e,r,n)=>{if(t===128&&$a(e))return r(Buffer.from("false"));n(e)},ar=t=>t.trim()==="true"}});function Ua(t,e){let r=new Sn(t),n=t?An:On;return It(e).forEach(s=>{let o=s.replace(n,"");r.paths.push(o),(Nn.test(o)?r.folders:r.files).push(o)}),r}var Sn,On,An,Nn,Ga=f({"src/lib/responses/CleanSummary.ts"(){v(),Sn=class{constructor(t){this.dryRun=t,this.paths=[],this.files=[],this.folders=[]}},On=/^[a-z]+\s*/i,An=/^[a-z]+\s+[a-z]+\s*/i,Nn=/\/$/}}),cr={};P(cr,{EMPTY_COMMANDS:()=>he,adhocExecTask:()=>Mn,configurationErrorTask:()=>it,isBufferTask:()=>In,isEmptyTask:()=>Bn,straightThroughBufferTask:()=>qa,straightThroughStringTask:()=>K});function Mn(t){return{commands:he,format:"empty",parser:t}}function it(t){return{commands:he,format:"empty",parser(){throw typeof t=="string"?new Ve(t):t}}}function K(t,e=!1){return{commands:t,format:"utf-8",parser(r){return e?String(r).trim():r}}}function qa(t){return{commands:t,format:"buffer",parser(e){return e}}}function In(t){return t.format==="buffer"}function Bn(t){return t.format==="empty"||!t.commands.length}var he,j=f({"src/lib/tasks/task.ts"(){ln(),he=[]}}),Ln={};P(Ln,{CONFIG_ERROR_INTERACTIVE_MODE:()=>ur,CONFIG_ERROR_MODE_REQUIRED:()=>lr,CONFIG_ERROR_UNKNOWN_OPTION:()=>pr,CleanOptions:()=>$t,cleanTask:()=>Dn,cleanWithOptionsTask:()=>Wa,isCleanOptionsArray:()=>za});function Wa(t,e){let{cleanMode:r,options:n,valid:s}=Ha(t);return r?s.options?(n.push(...e),n.some(Ya)?it(ur):Dn(r,n)):it(pr+JSON.stringify(t)):it(lr)}function Dn(t,e){return{commands:["clean",`-${t}`,...e],format:"utf-8",parser(n){return Ua(t==="n",n)}}}function za(t){return Array.isArray(t)&&t.every(e=>fr.has(e))}function Ha(t){let e,r=[],n={cleanMode:!1,options:!0};return t.replace(/[^a-z]i/g,"").split("").forEach(s=>{Va(s)?(e=s,n.cleanMode=!0):n.options=n.options&&Qa(r[r.length]=`-${s}`)}),{cleanMode:e,options:r,valid:n}}function Va(t){return t==="f"||t==="n"}function Qa(t){return/^-[a-z]$/i.test(t)&&fr.has(t.charAt(1))}function Ya(t){return/^-[^\-]/.test(t)?t.indexOf("i")>0:t==="--interactive"}var ur,lr,pr,$t,fr,jn=f({"src/lib/tasks/clean.ts"(){Ga(),v(),j(),ur="Git clean interactive mode is not supported",lr='Git clean mode parameter ("n" or "f") is required',pr="Git clean unknown option found in: ",$t=(t=>(t.DRY_RUN="n",t.FORCE="f",t.IGNORED_INCLUDED="x",t.IGNORED_ONLY="X",t.EXCLUDING="e",t.QUIET="q",t.RECURSIVE="d",t))($t||{}),fr=new Set(["i",...yn(Object.values($t))])}});function Ka(t){let e=new Un;for(let r of $n(t))e.addValue(r.file,String(r.key),r.value);return e}function Ja(t,e){let r=null,n=[],s=new Map;for(let o of $n(t,e))o.key===e&&(n.push(r=o.value),s.has(o.file)||s.set(o.file,[]),s.get(o.file).push(r));return{key:e,paths:Array.from(s.keys()),scopes:s,value:r,values:n}}function Xa(t){return t.replace(/^(file):/,"")}function*$n(t,e=null){let r=t.split("\0");for(let n=0,s=r.length-1;n<s;){let o=Xa(r[n++]),u=r[n++],a=e;if(u.includes(`
`)){let p=hn(u,`
`);a=p[0],u=p[1]}yield{file:o,key:a,value:u}}}var Un,Za=f({"src/lib/responses/ConfigList.ts"(){v(),Un=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((t,e)=>Object.assign(t,this.values[e]),{})),this._all}addFile(t){if(!(t in this.values)){let e=gt(this.files);this.values[t]=e?Object.create(this.values[e]):{},this.files.push(t)}return this.values[t]}addValue(t,e,r){let n=this.addFile(t);n.hasOwnProperty(e)?Array.isArray(n[e])?n[e].push(r):n[e]=[n[e],r]:n[e]=r,this._all=void 0}}}});function hr(t,e){return typeof t=="string"&&de.hasOwnProperty(t)?t:e}function tc(t,e,r,n){let s=["config",`--${n}`];return r&&s.push("--add"),s.push(t,e),{commands:s,format:"utf-8",parser(o){return o}}}function ec(t,e){let r=["config","--null","--show-origin","--get-all",t];return e&&r.splice(1,0,`--${e}`),{commands:r,format:"utf-8",parser(n){return Ja(n,t)}}}function rc(t){let e=["config","--list","--show-origin","--null"];return t&&e.push(`--${t}`),{commands:e,format:"utf-8",parser(r){return Ka(r)}}}function nc(){return{addConfig(t,e,...r){return this._runTask(tc(t,e,r[0]===!0,hr(r[1],"local")),D(arguments))},getConfig(t,e){return this._runTask(ec(t,hr(e,void 0)),D(arguments))},listConfig(...t){return this._runTask(rc(hr(t[0],void 0)),D(arguments))}}}var de,Gn=f({"src/lib/tasks/config.ts"(){Za(),v(),de=(t=>(t.system="system",t.global="global",t.local="local",t.worktree="worktree",t))(de||{})}});function qn(...t){return new Hn().param(...t)}function sc(t){let e=new Set,r={};return Qe(t,n=>{let[s,o,u]=n.split(Ze);e.add(s),(r[s]=r[s]||[]).push({line:tt(o),path:s,preview:u})}),{paths:e,results:r}}function oc(){return{grep(t){let e=D(arguments),r=pt(arguments);for(let s of Wn)if(r.includes(s))return this._runTask(it(`git.grep: use of "${s}" is not supported.`),e);typeof t=="string"&&(t=qn().param(t));let n=["grep","--null","-n","--full-name",...r,...t];return this._runTask({commands:n,format:"utf-8",parser(s){return sc(s)}},e)}}}var Wn,Ut,zn,Hn,Vn=f({"src/lib/tasks/grep.ts"(){v(),j(),Wn=["-h"],Ut=Symbol("grepQuery"),Hn=class{constructor(){this[zn]=[]}*[(zn=Ut,Symbol.iterator)](){for(let t of this[Ut])yield t}and(...t){return t.length&&this[Ut].push("--and","(",...ce(t,"-e"),")"),this}param(...t){return this[Ut].push(...ce(t,"-e")),this}}}}),Qn={};P(Qn,{ResetMode:()=>Gt,getResetMode:()=>ac,resetTask:()=>ic});function ic(t,e){let r=["reset"];return Yn(t)&&r.push(`--${t}`),r.push(...e),K(r)}function ac(t){if(Yn(t))return t;switch(typeof t){case"string":case"undefined":return"soft"}}function Yn(t){return Kn.includes(t)}var Gt,Kn,Jn=f({"src/lib/tasks/reset.ts"(){j(),Gt=(t=>(t.MIXED="mixed",t.SOFT="soft",t.HARD="hard",t.MERGE="merge",t.KEEP="keep",t))(Gt||{}),Kn=Array.from(Object.values(Gt))}}),Xn={};P(Xn,{CheckRepoActions:()=>pe,CleanOptions:()=>$t,GitConfigScope:()=>de,GitConstructError:()=>ze,GitError:()=>nt,GitPluginError:()=>He,GitResponseError:()=>mt,ResetMode:()=>Gt,TaskConfigurationError:()=>Ve,grepQueryBuilder:()=>qn});var cc=f({"src/lib/api.ts"(){Oa(),ct(),un(),wt(),ln(),En(),jn(),Gn(),Vn(),Jn()}});function uc(t){let e=ce(t,"-c");return{type:"spawn.args",action(r){return[...e,...r]}}}var lc=f({"src/lib/plugins/command-config-prefixing-plugin.ts"(){v()}});function pc({onClose:t=!0,onExit:e=50}={}){function r(){let s=-1,o={close:(0,Tt.deferred)(),closeTimeout:(0,Tt.deferred)(),exit:(0,Tt.deferred)(),exitTimeout:(0,Tt.deferred)()},u=Promise.race([t===!1?dr:o.closeTimeout.promise,e===!1?dr:o.exitTimeout.promise]);return n(t,o.close,o.closeTimeout),n(e,o.exit,o.exitTimeout),{close(a){s=a,o.close.done()},exit(a){s=a,o.exit.done()},get exitCode(){return s},result:u}}function n(s,o,u){s!==!1&&(s===!0?o.promise:o.promise.then(()=>Je(s))).then(u.done)}return{type:"spawn.after",action(s,o){return Mt(this,arguments,function*(u,{spawned:a,close:p}){var d,i;let c=r(),h=!0,m=()=>void(h=!1);(d=a.stdout)==null||d.on("data",m),(i=a.stderr)==null||i.on("data",m),a.on("error",m),a.on("close",N=>c.close(N)),a.on("exit",N=>c.exit(N));try{yield c.result,h&&(yield Je(50)),p(c.exitCode)}catch(N){p(c.exitCode,N)}})}}}var Tt,dr,fc=f({"src/lib/plugins/completion-detection.plugin.ts"(){Tt=$e(),v(),dr=(0,Tt.deferred)().promise}});function hc(t){return!!(t.exitCode&&t.stdErr.length)}function dc(t){return Buffer.concat([...t.stdOut,...t.stdErr])}function mc(t=!1,e=hc,r=dc){return(n,s)=>!t&&n||!e(s)?n:r(s)}function Zn(t){return{type:"task.error",action(e,r){let n=t(e.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(n)?{error:new nt(void 0,n.toString("utf-8"))}:{error:n}}}}var gc=f({"src/lib/plugins/error-detection.plugin.ts"(){ct()}}),ts,yc=f({"src/lib/plugins/plugin-store.ts"(){v(),ts=class{constructor(){this.plugins=new Set}add(t){let e=[];return Bt(t).forEach(r=>r&&this.plugins.add(w(e,r))),()=>{e.forEach(r=>this.plugins.delete(r))}}exec(t,e,r){let n=e,s=Object.freeze(Object.create(r));for(let o of this.plugins)o.type===t&&(n=o.action(n,s));return n}}}});function bc(t){let e="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(o,u){return r.includes(u.method)?gn(o,e):o}},{type:"spawn.after",action(o,u){var a;!u.commands.includes(e)||(a=u.spawned.stderr)==null||a.on("data",p=>{let d=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(p.toString("utf8"));!d||t({method:u.method,stage:vc(d[1]),progress:tt(d[2]),processed:tt(d[3]),total:tt(d[4])})})}}]}function vc(t){return String(t.toLowerCase().split(" ",1))||"unknown"}var kc=f({"src/lib/plugins/progress-monitor-plugin.ts"(){v()}}),_c=f({"src/lib/plugins/simple-git-plugin.ts"(){}});function Cc(t){let e=bn(t,["uid","gid"]);return{type:"spawn.options",action(r){return rt(rt({},e),r)}}}var wc=f({"src/lib/plugins/spawn-options-plugin.ts"(){v()}});function Tc({block:t}){if(t>0)return{type:"spawn.after",action(e,r){var n,s;let o;function u(){o&&clearTimeout(o),o=setTimeout(p,t)}function a(){var d,i;(d=r.spawned.stdout)==null||d.off("data",u),(i=r.spawned.stderr)==null||i.off("data",u),r.spawned.off("exit",a),r.spawned.off("close",a)}function p(){a(),r.kill(new He(void 0,"timeout","block timeout reached"))}(n=r.spawned.stdout)==null||n.on("data",u),(s=r.spawned.stderr)==null||s.on("data",u),r.spawned.on("exit",a),r.spawned.on("close",a),u()}}}var xc=f({"src/lib/plugins/timout-plugin.ts"(){un()}}),Rc=f({"src/lib/plugins/index.ts"(){lc(),fc(),gc(),yc(),kc(),_c(),wc(),xc()}});function Fc(){return(0,me.default)("simple-git")}function es(t,e,r){return!e||!String(e).replace(/\s*/,"")?r?(n,...s)=>{t(n,...s),r(n,...s)}:t:(n,...s)=>{t(`%s ${n}`,e,...s),r&&r(n,...s)}}function Pc(t,e,{namespace:r}){if(typeof t=="string")return t;let n=e&&e.namespace||"";return n.startsWith(r)?n.substr(r.length+1):n||r}function mr(t,e,r,n=Fc()){let s=t&&`[${t}]`||"",o=[],u=typeof e=="string"?n.extend(e):e,a=Pc(ut(e,U),u,n);return d(r);function p(i,c){return w(o,mr(t,a.replace(/^[^:]+/,i),c,n))}function d(i){let c=i&&`[${i}]`||"",h=u&&es(u,c)||yt,m=es(n,`${s} ${c}`,h);return Object.assign(u?h:m,{label:t,sibling:p,info:m,step:d})}}var me,rs=f({"src/lib/git-logger.ts"(){me=Sa(rn()),v(),me.default.formatters.L=t=>String(rr(t)?t.length:"-"),me.default.formatters.B=t=>Buffer.isBuffer(t)?t.toString("utf8"):Dt(t)}}),ge,gr,Ec=f({"src/lib/runners/tasks-pending-queue.ts"(){ct(),rs(),ge=class{constructor(t="GitExecutor"){this.logLabel=t,this._queue=new Map}withProgress(t){return this._queue.get(t)}createProgress(t){let e=ge.getName(t.commands[0]),r=mr(this.logLabel,e);return{task:t,logger:r,name:e}}push(t){let e=this.createProgress(t);return e.logger("Adding task to the queue, commands = %o",t.commands),this._queue.set(t,e),e}fatal(t){for(let[e,{logger:r}]of Array.from(this._queue.entries()))e===t.task?(r.info("Failed %o",t),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",t.message),this.complete(e);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(t){this.withProgress(t)&&this._queue.delete(t)}attempt(t){let e=this.withProgress(t);if(!e)throw new nt(void 0,"TasksPendingQueue: attempt called for an unknown task");return e.logger("Starting task"),e}static getName(t="empty"){return`task:${t}:${++ge.counter}`}},gr=ge,gr.counter=0}});function ye(t,e){return{method:dn(t.commands)||"",commands:e}}function Sc(t,e){return r=>{e("[ERROR] child process exception %o",r),t.push(Buffer.from(String(r.stack),"ascii"))}}function ns(t,e,r,n){return s=>{r("%s received %L bytes",e,s),n("%B",s),t.push(s)}}var ss,yr,Oc=f({"src/lib/runners/git-executor-chain.ts"(){ss=b("child_process"),ct(),j(),v(),Ec(),yr=class{constructor(t,e,r){this._executor=t,this._scheduler=e,this._plugins=r,this._chain=Promise.resolve(),this._queue=new gr}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(t){this._cwd=t}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(t){return this._queue.push(t),this._chain=this._chain.then(()=>this.attemptTask(t))}attemptTask(t){return Mt(this,null,function*(){let e=yield this._scheduler.next(),r=()=>this._queue.complete(t);try{let{logger:n}=this._queue.attempt(t);return yield Bn(t)?this.attemptEmptyTask(t,n):this.attemptRemoteTask(t,n)}catch(n){throw this.onFatalException(t,n)}finally{r(),e()}})}onFatalException(t,e){let r=e instanceof nt?Object.assign(e,{task:t}):new nt(t,e&&String(e));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(t,e){return Mt(this,null,function*(){let r=this._plugins.exec("spawn.args",[...t.commands],ye(t,t.commands)),n=yield this.gitResponse(t,this.binary,r,this.outputHandler,e.step("SPAWN")),s=yield this.handleTaskData(t,r,n,e.step("HANDLE"));return e("passing response to task's parser as a %s",t.format),In(t)?ir(t.parser,s):ir(t.parser,s.asStrings())})}attemptEmptyTask(t,e){return Mt(this,null,function*(){return e("empty task bypassing child process to call to task's parser"),t.parser(this)})}handleTaskData(t,e,r,n){let{exitCode:s,rejection:o,stdOut:u,stdErr:a}=r;return new Promise((p,d)=>{n("Preparing to handle process response exitCode=%d stdOut=",s);let{error:i}=this._plugins.exec("task.error",{error:o},rt(rt({},ye(t,e)),r));if(i&&t.onError)return n.info("exitCode=%s handling with custom error handler"),t.onError(r,i,c=>{n.info("custom error handler treated as success"),n("custom error returned a %s",Dt(c)),p(new jt(Array.isArray(c)?Buffer.concat(c):c,Buffer.concat(a)))},d);if(i)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",s,a.length,o),d(i);n.info("retrieving task output complete"),p(new jt(Buffer.concat(u),Buffer.concat(a)))})}gitResponse(t,e,r,n,s){return Mt(this,null,function*(){let o=s.sibling("output"),u=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},ye(t,t.commands));return new Promise(a=>{let p=[],d=[],i;s.info("%s %o",e,r),s("%O",u);let c=(0,ss.spawn)(e,r,u);c.stdout.on("data",ns(p,"stdOut",s,o.step("stdOut"))),c.stderr.on("data",ns(d,"stdErr",s,o.step("stdErr"))),c.on("error",Sc(d,s)),n&&(s("Passing child process stdOut/stdErr to custom outputHandler"),n(e,c.stdout,c.stderr,[...r])),this._plugins.exec("spawn.after",void 0,We(rt({},ye(t,r)),{spawned:c,close(h,m){a({stdOut:p,stdErr:d,exitCode:h,rejection:i||m})},kill(h){c.killed||(i=h,c.kill("SIGINT"))}}))})})}}}}),os={};P(os,{GitExecutor:()=>is});var is,Ac=f({"src/lib/runners/git-executor.ts"(){Oc(),is=class{constructor(t="git",e,r,n){this.binary=t,this.cwd=e,this._scheduler=r,this._plugins=n,this._chain=new yr(this,this._scheduler,this._plugins)}chain(){return new yr(this,this._scheduler,this._plugins)}push(t){return this._chain.push(t)}}}});function Nc(t,e,r=yt){let n=o=>{r(null,o)},s=o=>{(o==null?void 0:o.task)===t&&r(o instanceof mt?Mc(o):o,void 0)};e.then(n,s)}function Mc(t){let e=n=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${n} should be GitResponseError.git.${n}, this will no longer be available in version 3`),e=yt};return Object.create(t,Object.getOwnPropertyNames(t.git).reduce(r,{}));function r(n,s){return s in t||(n[s]={enumerable:!1,configurable:!1,get(){return e(s),t.git[s]}}),n}}var Ic=f({"src/lib/task-callback.ts"(){wt(),v()}});function as(t,e){return Mn(r=>{if(!Ye(t))throw new Error(`Git.cwd: cannot change to non-directory "${t}"`);return(e||r).cwd=t})}var Bc=f({"src/lib/tasks/change-working-directory.ts"(){v(),j()}});function Lc(t,e){let r=["hash-object",t];return e&&r.push("-w"),K(r,!0)}var Dc=f({"src/lib/tasks/hash-object.ts"(){j()}});function jc(t,e,r){let n=String(r).trim(),s;if(s=cs.exec(n))return new be(t,e,!1,s[1]);if(s=us.exec(n))return new be(t,e,!0,s[1]);let o="",u=n.split(" ");for(;u.length;)if(u.shift()==="in"){o=u.join(" ");break}return new be(t,e,/^re/i.test(n),o)}var be,cs,us,$c=f({"src/lib/responses/InitSummary.ts"(){be=class{constructor(t,e,r,n){this.bare=t,this.path=e,this.existing=r,this.gitDir=n}},cs=/^Init.+ repository in (.+)$/,us=/^Rein.+ in (.+)$/}});function Uc(t){return t.includes(br)}function Gc(t=!1,e,r){let n=["init",...r];return t&&!Uc(n)&&n.splice(1,0,br),{commands:n,format:"utf-8",parser(s){return jc(n.includes("--bare"),e,s)}}}var br,qc=f({"src/lib/tasks/init.ts"(){$c(),br="--bare"}}),ls,Wc=f({"src/lib/responses/DiffSummary.ts"(){ls=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function ps(t){let e=t.trim().split(`
`),r=new ls;zc(r,e.pop());for(let n=0,s=e.length;n<s;n++){let o=e[n];Vc(o,r)||Qc(o,r)}return r}function zc(t,e){(e||"").trim().split(", ").forEach(function(r){let n=/(\d+)\s([a-z]+)/.exec(r);!n||Hc(t,n[2],parseInt(n[1],10))})}function Hc(t,e,r){let n=/([a-z]+?)s?\b/.exec(e);!n||!vr[n[1]]||vr[n[1]](t,r)}function Vc(t,{files:e}){let r=t.trim().match(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/);if(r){var n=(r[3]||"").trim();return e.push({file:r[1].trim(),changes:parseInt(r[2],10),insertions:n.replace(/-/g,"").length,deletions:n.replace(/\+/g,"").length,binary:!1}),!0}return!1}function Qc(t,{files:e}){let r=t.match(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)$/);return r?(e.push({file:r[1].trim(),before:+r[2],after:+r[3],binary:!0}),!0):!1}var vr,fs=f({"src/lib/parsers/parse-diff-summary.ts"(){Wc(),vr={file(t,e){t.changed=e},deletion(t,e){t.deletions=e},insertion(t,e){t.insertions=e}}}});function Yc(t,e){return e.reduce((r,n,s)=>(r[n]=t[s]||"",r),Object.create({diff:null}))}function hs(t=Cr,e=ds){return function(r){let n=It(r,!0,kr).map(function(s){let o=s.trim().split(_r),u=Yc(o[0].trim().split(t),e);return o.length>1&&!!o[1].trim()&&(u.diff=ps(o[1])),u});return{all:n,latest:n.length&&n[0]||null,total:n.length}}}var kr,_r,Cr,ds,ms=f({"src/lib/parsers/parse-list-log-summary.ts"(){v(),fs(),kr="\xF2\xF2\xF2\xF2\xF2\xF2 ",_r=" \xF2\xF2",Cr=" \xF2 ",ds=["hash","date","message","refs","author_name","author_email"]}});function Kc(t,e){let r=[],n=[];return Object.keys(t).forEach(s=>{r.push(s),n.push(String(t[s]))}),[r,n.join(e)]}function Jc(t){return Object.keys(t).reduce((e,r)=>(r in wr||(e[r]=t[r]),e),{})}function gs(t={},e=[]){let r=ut(t.splitter,U,Cr),n=!tr(t.format)&&t.format?t.format:{hash:"%H",date:t.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:t.multiLine?"%B":"%b",author_name:t.mailMap!==!1?"%aN":"%an",author_email:t.mailMap!==!1?"%aE":"%ae"},[s,o]=Kc(n,r),u=[],a=[`--pretty=format:${kr}${o}${_r}`,...e],p=t.n||t["max-count"]||t.maxCount;if(p&&a.push(`--max-count=${p}`),t.from&&t.to){let d=t.symmetric!==!1?"...":"..";u.push(`${t.from}${d}${t.to}`)}return U(t.file)&&u.push("--follow",t.file),sr(Jc(t),a),{fields:s,splitter:r,commands:[...a,...u]}}function Xc(t,e,r){return{commands:["log",...r],format:"utf-8",parser:hs(t,e)}}function Zc(){return{log(...r){let n=D(arguments),s=e(...r)||t(gs(or(arguments),ut(arguments[0],le)));return this._runTask(s,n)}};function t(r){return Xc(r.splitter,r.fields,r.commands)}function e(r,n){return U(r)&&U(n)&&it("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var wr,ys=f({"src/lib/tasks/log.ts"(){ms(),v(),j(),wr=(t=>(t[t["--pretty"]=0]="--pretty",t[t["max-count"]=1]="max-count",t[t.maxCount=2]="maxCount",t[t.n=3]="n",t[t.file=4]="file",t[t.format=5]="format",t[t.from=6]="from",t[t.to=7]="to",t[t.splitter=8]="splitter",t[t.symmetric=9]="symmetric",t[t.mailMap=10]="mailMap",t[t.multiLine=11]="multiLine",t[t.strictDate=12]="strictDate",t))(wr||{})}}),ve,bs,tu=f({"src/lib/responses/MergeSummary.ts"(){ve=class{constructor(t,e=null,r){this.reason=t,this.file=e,this.meta=r}toString(){return`${this.file}:${this.reason}`}},bs=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),Tr,vs,eu=f({"src/lib/responses/PullSummary.ts"(){Tr=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},vs=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function xr(t){return t.objects=t.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function ks(t){let e=/^\s*(\d+)/.exec(t),r=/delta (\d+)/i.exec(t);return{count:tt(e&&e[1]||"0"),delta:tt(r&&r[1]||"0")}}var _s,ru=f({"src/lib/parsers/parse-remote-objects.ts"(){v(),_s=[new lt(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(t,[e,r])=>{let n=e.toLowerCase(),s=xr(t.remoteMessages);Object.assign(s,{[n]:tt(r)})}),new lt(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(t,[e,r])=>{let n=e.toLowerCase(),s=xr(t.remoteMessages);Object.assign(s,{[n]:tt(r)})}),new lt(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(t,[e,r,n])=>{let s=xr(t.remoteMessages);s.total=ks(e),s.reused=ks(r),s.packReused=tt(n)})]}});function Cs(t,e){return et({remoteMessages:new Ts},ws,e)}var ws,Ts,xs=f({"src/lib/parsers/parse-remote-messages.ts"(){v(),ru(),ws=[new lt(/^remote:\s*(.+)$/,(t,[e])=>(t.remoteMessages.all.push(e.trim()),!1)),..._s,new lt([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(t,[e])=>{t.remoteMessages.pullRequestUrl=e}),new lt([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(t,[e,r,n])=>{t.remoteMessages.vulnerabilities={count:tt(e),summary:r,url:n}})],Ts=class{constructor(){this.all=[]}}}});function nu(t,e){let r=et(new vs,Ss,t,e);return r.message&&r}var Rs,Fs,Ps,Es,Ss,Os,Rr,As=f({"src/lib/parsers/parse-pull.ts"(){eu(),v(),xs(),Rs=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,Fs=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,Ps=/^(create|delete) mode \d+ (.+)/,Es=[new T(Rs,(t,[e,r,n])=>{t.files.push(e),r&&(t.insertions[e]=r.length),n&&(t.deletions[e]=n.length)}),new T(Fs,(t,[e,,r,,n])=>r!==void 0||n!==void 0?(t.summary.changes=+e||0,t.summary.insertions=+r||0,t.summary.deletions=+n||0,!0):!1),new T(Ps,(t,[e,r])=>{w(t.files,r),w(e==="create"?t.created:t.deleted,r)})],Ss=[new T(/^from\s(.+)$/i,(t,[e])=>void(t.remote=e)),new T(/^fatal:\s(.+)$/,(t,[e])=>void(t.message=e)),new T(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(t,[e,r,n,s])=>{t.branch.local=n,t.hash.local=e,t.branch.remote=s,t.hash.remote=r})],Os=(t,e)=>et(new Tr,Es,t,e),Rr=(t,e)=>Object.assign(new Tr,Os(t,e),Cs(t,e))}}),Ns,Ms,Is,su=f({"src/lib/parsers/parse-merge.ts"(){tu(),v(),As(),Ns=[new T(/^Auto-merging\s+(.+)$/,(t,[e])=>{t.merges.push(e)}),new T(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(t,[e,r])=>{t.conflicts.push(new ve(e,r))}),new T(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(t,[e,r,n])=>{t.conflicts.push(new ve(e,r,{deleteRef:n}))}),new T(/^CONFLICT\s+\((.+)\):/,(t,[e])=>{t.conflicts.push(new ve(e,null))}),new T(/^Automatic merge failed;\s+(.+)$/,(t,[e])=>{t.result=e})],Ms=(t,e)=>Object.assign(Is(t,e),Rr(t,e)),Is=t=>et(new bs,Ns,t)}});function Bs(t){return t.length?{commands:["merge",...t],format:"utf-8",parser(e,r){let n=Ms(e,r);if(n.failed)throw new mt(n);return n}}:it("Git.merge requires at least one option")}var ou=f({"src/lib/tasks/merge.ts"(){wt(),su(),j()}});function iu(t,e,r){let n=r.includes("deleted"),s=r.includes("tag")||/^refs\/tags/.test(t),o=!r.includes("new");return{deleted:n,tag:s,branch:!s,new:!o,alreadyUpdated:o,local:t,remote:e}}var Ls,Ds,js,au=f({"src/lib/parsers/parse-push.ts"(){v(),xs(),Ls=[new T(/^Pushing to (.+)$/,(t,[e])=>{t.repo=e}),new T(/^updating local tracking ref '(.+)'/,(t,[e])=>{t.ref=We(rt({},t.ref||{}),{local:e})}),new T(/^[*-=]\s+([^:]+):(\S+)\s+\[(.+)]$/,(t,[e,r,n])=>{t.pushed.push(iu(e,r,n))}),new T(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(t,[e,r,n])=>{t.branch=We(rt({},t.branch||{}),{local:e,remote:r,remoteName:n})}),new T(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(t,[e,r,n,s])=>{t.update={head:{local:e,remote:r},hash:{from:n,to:s}}})],Ds=(t,e)=>{let r=js(t,e),n=Cs(t,e);return rt(rt({},r),n)},js=(t,e)=>et({pushed:[]},Ls,t,e)}}),$s={};P($s,{pushTagsTask:()=>cu,pushTask:()=>Fr});function cu(t={},e){return w(e,"--tags"),Fr(t,e)}function Fr(t={},e){let r=["push",...e];return t.branch&&r.splice(1,0,t.branch),t.remote&&r.splice(1,0,t.remote),Ke(r,"-v"),w(r,"--verbose"),w(r,"--porcelain"),{commands:r,format:"utf-8",parser:Ds}}var Us=f({"src/lib/tasks/push.ts"(){au(),v()}}),Gs,qs,uu=f({"src/lib/responses/FileStatusSummary.ts"(){Gs=/^(.+) -> (.+)$/,qs=class{constructor(t,e,r){if(this.path=t,this.index=e,this.working_dir=r,e+r==="R"){let n=Gs.exec(t)||[null,t,t];this.from=n[1]||"",this.path=n[2]||""}}}}});function Ws(t){let e=/^(.+) -> (.+)$/.exec(t);return e?{from:String(e[1]),to:String(e[2])}:{from:t,to:t}}function H(t,e,r){return[`${t}${e}`,r]}function Pr(t,...e){return e.map(r=>H(t,r,(n,s)=>w(n.conflicted,s)))}function lu(t,e){let r=e.trim();switch(" "){case r.charAt(2):return n(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return n(" ",r.charAt(0),r.substr(2));default:return}function n(s,o,u){let a=`${s}${o}`,p=Hs.get(a);p&&p(t,u),a!=="##"&&a!=="!!"&&t.files.push(new qs(u,s,o))}}var zs,Hs,Vs,pu=f({"src/lib/responses/StatusSummary.ts"(){v(),uu(),zs=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},Hs=new Map([H(" ","A",(t,e)=>w(t.created,e)),H(" ","D",(t,e)=>w(t.deleted,e)),H(" ","M",(t,e)=>w(t.modified,e)),H("A"," ",(t,e)=>w(t.created,e)&&w(t.staged,e)),H("A","M",(t,e)=>w(t.created,e)&&w(t.staged,e)&&w(t.modified,e)),H("D"," ",(t,e)=>w(t.deleted,e)&&w(t.staged,e)),H("M"," ",(t,e)=>w(t.modified,e)&&w(t.staged,e)),H("M","M",(t,e)=>w(t.modified,e)&&w(t.staged,e)),H("R"," ",(t,e)=>{w(t.renamed,Ws(e))}),H("R","M",(t,e)=>{let r=Ws(e);w(t.renamed,r),w(t.modified,r.to)}),H("!","!",(t,e)=>{w(t.ignored=t.ignored||[],e)}),H("?","?",(t,e)=>w(t.not_added,e)),...Pr("A","A","U"),...Pr("D","D","U"),...Pr("U","A","D","U"),["##",(t,e)=>{let r=/ahead (\d+)/,n=/behind (\d+)/,s=/^(.+?(?=(?:\.{3}|\s|$)))/,o=/\.{3}(\S*)/,u=/\son\s([\S]+)$/,a;a=r.exec(e),t.ahead=a&&+a[1]||0,a=n.exec(e),t.behind=a&&+a[1]||0,a=s.exec(e),t.current=a&&a[1],a=o.exec(e),t.tracking=a&&a[1],a=u.exec(e),t.current=a&&a[1]||t.current,t.detached=/\(no branch\)/.test(e)}]]),Vs=function(t){let e=t.trim().split(`
`),r=new zs;for(let n=0,s=e.length;n<s;n++)lu(r,e[n]);return r}}});function fu(t){return{format:"utf-8",commands:["status","--porcelain","-b","-u",...t],parser(e){return Vs(e)}}}var hu=f({"src/lib/tasks/status.ts"(){pu()}}),Qs={};P(Qs,{SimpleGitApi:()=>Er});var Er,du=f({"src/lib/simple-git-api.ts"(){Ic(),Bc(),Gn(),Vn(),Dc(),qc(),ys(),ou(),Us(),hu(),j(),v(),Er=class{constructor(t){this._executor=t}_runTask(t,e){let r=this._executor.chain(),n=r.push(t);return e&&Nc(t,n,e),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:r}})}add(t){return this._runTask(K(["add",...Bt(t)]),D(arguments))}cwd(t){let e=D(arguments);return typeof t=="string"?this._runTask(as(t,this._executor),e):typeof(t==null?void 0:t.path)=="string"?this._runTask(as(t.path,t.root&&this._executor||void 0),e):this._runTask(it("Git.cwd: workingDirectory must be supplied as a string"),e)}hashObject(t,e){return this._runTask(Lc(t,e===!0),D(arguments))}init(t){return this._runTask(Gc(t===!0,this._executor.cwd,pt(arguments)),D(arguments))}merge(){return this._runTask(Bs(pt(arguments)),D(arguments))}mergeFromTo(t,e){return U(t)&&U(e)?this._runTask(Bs([t,e,...pt(arguments)]),D(arguments,!1)):this._runTask(it("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(t){return this._executor.outputHandler=t,this}push(){let t=Fr({remote:ut(arguments[0],U),branch:ut(arguments[1],U)},pt(arguments));return this._runTask(t,D(arguments))}stash(){return this._runTask(K(["stash",...pt(arguments)]),D(arguments))}status(){return this._runTask(fu(pt(arguments)),D(arguments))}},Object.assign(Er.prototype,nc(),oc(),Zc())}}),Ys={};P(Ys,{Scheduler:()=>Xs});var Ks,Js,Xs,mu=f({"src/lib/runners/scheduler.ts"(){v(),Ks=$e(),rs(),Js=(()=>{let t=0;return()=>{t++;let{promise:e,done:r}=(0,Ks.createDeferred)();return{promise:e,done:r,id:t}}})(),Xs=class{constructor(t=2){this.concurrency=t,this.logger=mr("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",t)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let t=w(this.running,this.pending.shift());this.logger("Attempting id=%s",t.id),t.done(()=>{this.logger("Completing id=",t.id),Ke(this.running,t),this.schedule()})}next(){let{promise:t,id:e}=w(this.pending,Js());return this.logger("Scheduling id=%s",e),this.schedule(),t}}}}),Zs={};P(Zs,{applyPatchTask:()=>gu});function gu(t,e){return K(["apply",...e,...t])}var yu=f({"src/lib/tasks/apply-patch.ts"(){j()}});function bu(t,e){return{branch:t,hash:e,success:!0}}function vu(t){return{branch:t,hash:null,success:!1}}var to,ku=f({"src/lib/responses/BranchDeleteSummary.ts"(){to=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function eo(t,e){return e===1&&Sr.test(t)}var ro,Sr,no,ke,_u=f({"src/lib/parsers/parse-branch-delete.ts"(){ku(),v(),ro=/(\S+)\s+\(\S+\s([^)]+)\)/,Sr=/^error[^']+'([^']+)'/m,no=[new T(ro,(t,[e,r])=>{let n=bu(e,r);t.all.push(n),t.branches[e]=n}),new T(Sr,(t,[e])=>{let r=vu(e);t.errors.push(r),t.all.push(r),t.branches[e]=r})],ke=(t,e)=>et(new to,no,t,e)}}),so,Cu=f({"src/lib/responses/BranchSummary.ts"(){so=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(t,e,r,n,s){t&&(this.detached=e,this.current=r),this.all.push(r),this.branches[r]={current:t,name:r,commit:n,label:s}}}}});function oo(t){return et(new so,io,t)}var io,wu=f({"src/lib/parsers/parse-branch.ts"(){Cu(),v(),io=[new T(/^(\*\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(t,[e,r,n,s])=>{t.push(!!e,!0,r,n,s)}),new T(/^(\*\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(t,[e,r,n,s])=>{t.push(!!e,!1,r,n,s)})]}}),ao={};P(ao,{branchLocalTask:()=>xu,branchTask:()=>Tu,containsDeleteBranchCommand:()=>co,deleteBranchTask:()=>Fu,deleteBranchesTask:()=>Ru});function co(t){let e=["-d","-D","--delete"];return t.some(r=>e.includes(r))}function Tu(t){let e=co(t),r=["branch",...t];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(n,s){return e?ke(n,s).all[0]:oo(n)}}}function xu(){return{format:"utf-8",commands:["branch","-v"],parser:oo}}function Ru(t,e=!1){return{format:"utf-8",commands:["branch","-v",e?"-D":"-d",...t],parser(r,n){return ke(r,n)},onError({exitCode:r,stdOut:n},s,o,u){if(!eo(String(s),r))return u(s);o(n)}}}function Fu(t,e=!1){let r={format:"utf-8",commands:["branch","-v",e?"-D":"-d",t],parser(n,s){return ke(n,s).branches[t]},onError({exitCode:n,stdErr:s,stdOut:o},u,a,p){if(!eo(String(u),n))return p(u);throw new mt(r.parser(Lt(o),Lt(s)),String(u))}};return r}var Pu=f({"src/lib/tasks/branch.ts"(){wt(),_u(),wu(),v()}}),uo,Eu=f({"src/lib/responses/CheckIgnore.ts"(){uo=t=>t.split(/\n/g).map(e=>e.trim()).filter(e=>!!e)}}),lo={};P(lo,{checkIgnoreTask:()=>Su});function Su(t){return{commands:["check-ignore",...t],format:"utf-8",parser:uo}}var Ou=f({"src/lib/tasks/check-ignore.ts"(){Eu()}}),po={};P(po,{cloneMirrorTask:()=>Au,cloneTask:()=>fo});function fo(t,e,r){let n=["clone",...r];return typeof t=="string"&&n.push(t),typeof e=="string"&&n.push(e),K(n)}function Au(t,e,r){return w(r,"--mirror"),fo(t,e,r)}var Nu=f({"src/lib/tasks/clone.ts"(){j(),v()}});function Mu(t){return et({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},ho,t)}var ho,Iu=f({"src/lib/parsers/parse-commit.ts"(){v(),ho=[new T(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(t,[e,r,n])=>{t.branch=e,t.commit=n,t.root=!!r}),new T(/\s*Author:\s(.+)/i,(t,[e])=>{let r=e.split("<"),n=r.pop();!n||!n.includes("@")||(t.author={email:n.substr(0,n.length-1),name:r.join("<").trim()})}),new T(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0,t.summary.insertions=parseInt(r,10)||0,t.summary.deletions=parseInt(n,10)||0}),new T(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0;let s=parseInt(r,10)||0;n==="-"?t.summary.deletions=s:n==="+"&&(t.summary.insertions=s)})]}}),mo={};P(mo,{commitTask:()=>Bu});function Bu(t,e,r){let n=["commit"];return t.forEach(s=>n.push("-m",s)),n.push(...e,...r),{commands:n,format:"utf-8",parser:Mu}}var Lu=f({"src/lib/tasks/commit.ts"(){Iu()}}),go={};P(go,{diffSummaryTask:()=>Du});function Du(t){return{commands:["diff","--stat=4096",...t],format:"utf-8",parser(e){return ps(e)}}}var ju=f({"src/lib/tasks/diff.ts"(){fs()}});function $u(t,e){return et({raw:t,remote:null,branches:[],tags:[]},yo,t,e)}var yo,Uu=f({"src/lib/parsers/parse-fetch.ts"(){v(),yo=[new T(/From (.+)$/,(t,[e])=>{t.remote=e}),new T(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.branches.push({name:e,tracking:r})}),new T(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.tags.push({name:e,tracking:r})})]}}),bo={};P(bo,{fetchTask:()=>Gu});function Gu(t,e,r){let n=["fetch",...r];return t&&e&&n.push(t,e),{commands:n,format:"utf-8",parser:$u}}var qu=f({"src/lib/tasks/fetch.ts"(){Uu()}});function Wu(t){return et({moves:[]},vo,t)}var vo,zu=f({"src/lib/parsers/parse-move.ts"(){v(),vo=[new T(/^Renaming (.+) to (.+)$/,(t,[e,r])=>{t.moves.push({from:e,to:r})})]}}),ko={};P(ko,{moveTask:()=>Hu});function Hu(t,e){return{commands:["mv","-v",...Bt(t),e],format:"utf-8",parser:Wu}}var Vu=f({"src/lib/tasks/move.ts"(){zu(),v()}}),_o={};P(_o,{pullTask:()=>Qu});function Qu(t,e,r){let n=["pull",...r];return t&&e&&n.splice(1,0,t,e),{commands:n,format:"utf-8",parser(s,o){return Rr(s,o)},onError(s,o,u,a){let p=nu(Lt(s.stdOut),Lt(s.stdErr));if(p)return a(new mt(p));a(o)}}}var Yu=f({"src/lib/tasks/pull.ts"(){wt(),As(),v()}});function Ku(t){let e={};return Co(t,([r])=>e[r]={name:r}),Object.values(e)}function Ju(t){let e={};return Co(t,([r,n,s])=>{e.hasOwnProperty(r)||(e[r]={name:r,refs:{fetch:"",push:""}}),s&&n&&(e[r].refs[s.replace(/[^a-z]/g,"")]=n)}),Object.values(e)}function Co(t,e){Qe(t,r=>e(r.split(/\s+/)))}var Xu=f({"src/lib/responses/GetRemoteSummary.ts"(){v()}}),wo={};P(wo,{addRemoteTask:()=>Zu,getRemotesTask:()=>tl,listRemotesTask:()=>el,remoteTask:()=>rl,removeRemoteTask:()=>nl});function Zu(t,e,r=[]){return K(["remote","add",...r,t,e])}function tl(t){let e=["remote"];return t&&e.push("-v"),{commands:e,format:"utf-8",parser:t?Ju:Ku}}function el(t=[]){let e=[...t];return e[0]!=="ls-remote"&&e.unshift("ls-remote"),K(e)}function rl(t=[]){let e=[...t];return e[0]!=="remote"&&e.unshift("remote"),K(e)}function nl(t){return K(["remote","remove",t])}var sl=f({"src/lib/tasks/remote.ts"(){Xu(),j()}}),To={};P(To,{stashListTask:()=>ol});function ol(t={},e){let r=gs(t),n=hs(r.splitter,r.fields);return{commands:["stash","list",...r.commands,...e],format:"utf-8",parser:n}}var il=f({"src/lib/tasks/stash-list.ts"(){ms(),ys()}}),xo={};P(xo,{addSubModuleTask:()=>al,initSubModuleTask:()=>cl,subModuleTask:()=>_e,updateSubModuleTask:()=>ul});function al(t,e){return _e(["add",t,e])}function cl(t){return _e(["init",...t])}function _e(t){let e=[...t];return e[0]!=="submodule"&&e.unshift("submodule"),K(e)}function ul(t){return _e(["update",...t])}var ll=f({"src/lib/tasks/sub-module.ts"(){j()}});function pl(t,e){let r=isNaN(t),n=isNaN(e);return r!==n?r?1:-1:r?Ro(t,e):0}function Ro(t,e){return t===e?0:t>e?1:-1}function fl(t){return t.trim()}function Ce(t){return typeof t=="string"&&parseInt(t.replace(/^\D+/g,""),10)||0}var Fo,Po,hl=f({"src/lib/responses/TagList.ts"(){Fo=class{constructor(t,e){this.all=t,this.latest=e}},Po=function(t,e=!1){let r=t.split(`
`).map(fl).filter(Boolean);e||r.sort(function(s,o){let u=s.split("."),a=o.split(".");if(u.length===1||a.length===1)return pl(Ce(u[0]),Ce(a[0]));for(let p=0,d=Math.max(u.length,a.length);p<d;p++){let i=Ro(Ce(u[p]),Ce(a[p]));if(i)return i}return 0});let n=e?r[0]:[...r].reverse().find(s=>s.indexOf(".")>=0);return new Fo(r,n)}}}),Eo={};P(Eo,{addAnnotatedTagTask:()=>gl,addTagTask:()=>ml,tagListTask:()=>dl});function dl(t=[]){let e=t.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...t],parser(r){return Po(r,e)}}}function ml(t){return{format:"utf-8",commands:["tag",t],parser(){return{name:t}}}}function gl(t,e){return{format:"utf-8",commands:["tag","-a","-m",e,t],parser(){return{name:t}}}}var yl=f({"src/lib/tasks/tag.ts"(){hl()}}),bl=Ea({"src/git.js"(t,e){var{GitExecutor:r}=(Ac(),E(os)),{SimpleGitApi:n}=(du(),E(Qs)),{Scheduler:s}=(mu(),E(Ys)),{configurationErrorTask:o}=(j(),E(cr)),{asArray:u,filterArray:a,filterPrimitives:p,filterString:d,filterStringOrStringArray:i,filterType:c,getTrailingOptions:h,trailingFunctionArgument:m,trailingOptionsArgument:N}=(v(),E(xn)),{applyPatchTask:F}=(yu(),E(Zs)),{branchTask:R,branchLocalTask:M,deleteBranchesTask:X,deleteBranchTask:Et}=(Pu(),E(ao)),{checkIgnoreTask:Z}=(Ou(),E(lo)),{checkIsRepoTask:Ee}=(En(),E(Rn)),{cloneTask:ot,cloneMirrorTask:St}=(Nu(),E(po)),{cleanWithOptionsTask:ft,isCleanOptionsArray:Ot}=(jn(),E(Ln)),{commitTask:Jo}=(Lu(),E(mo)),{diffSummaryTask:Xo}=(ju(),E(go)),{fetchTask:Zo}=(qu(),E(bo)),{moveTask:ti}=(Vu(),E(ko)),{pullTask:ei}=(Yu(),E(_o)),{pushTagsTask:ri}=(Us(),E($s)),{addRemoteTask:ni,getRemotesTask:si,listRemotesTask:oi,remoteTask:ii,removeRemoteTask:ai}=(sl(),E(wo)),{getResetMode:ci,resetTask:ui}=(Jn(),E(Qn)),{stashListTask:li}=(il(),E(To)),{addSubModuleTask:pi,initSubModuleTask:fi,subModuleTask:hi,updateSubModuleTask:di}=(ll(),E(xo)),{addAnnotatedTagTask:mi,addTagTask:gi,tagListTask:yi}=(yl(),E(Eo)),{straightThroughBufferTask:bi,straightThroughStringTask:Q}=(j(),E(cr));function y(l,g){this._executor=new r(l.binary,l.baseDir,new s(l.maxConcurrentProcesses),g)}(y.prototype=Object.create(n.prototype)).constructor=y,y.prototype.customBinary=function(l){return this._executor.binary=l,this},y.prototype.env=function(l,g){return arguments.length===1&&typeof l=="object"?this._executor.env=l:(this._executor.env=this._executor.env||{})[l]=g,this},y.prototype.stashList=function(l){return this._runTask(li(N(arguments)||{},a(l)&&l||[]),m(arguments))};function Lr(l,g,C,L){return typeof C!="string"?o(`git.${l}() requires a string 'repoPath'`):g(C,c(L,d),h(arguments))}y.prototype.clone=function(){return this._runTask(Lr("clone",ot,...arguments),m(arguments))},y.prototype.mirror=function(){return this._runTask(Lr("mirror",St,...arguments),m(arguments))},y.prototype.mv=function(l,g){return this._runTask(ti(l,g),m(arguments))},y.prototype.checkoutLatestTag=function(l){var g=this;return this.pull(function(){g.tags(function(C,L){g.checkout(L.latest,l)})})},y.prototype.commit=function(l,g,C,L){let $=m(arguments);return i(l)?this._runTask(Jo(u(l),u(c(g,i,[])),[...c(C,a,[]),...h(arguments,0,!0)]),$):this._runTask(o("git.commit: requires the commit message to be supplied as a string/string[]"),$)},y.prototype.pull=function(l,g,C,L){return this._runTask(ei(c(l,d),c(g,d),h(arguments)),m(arguments))},y.prototype.fetch=function(l,g){return this._runTask(Zo(c(l,d),c(g,d),h(arguments)),m(arguments))},y.prototype.silent=function(l){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},y.prototype.tags=function(l,g){return this._runTask(yi(h(arguments)),m(arguments))},y.prototype.rebase=function(){return this._runTask(Q(["rebase",...h(arguments)]),m(arguments))},y.prototype.reset=function(l){return this._runTask(ui(ci(l),h(arguments)),m(arguments))},y.prototype.revert=function(l){let g=m(arguments);return typeof l!="string"?this._runTask(o("Commit must be a string"),g):this._runTask(Q(["revert",...h(arguments,0,!0),l]),g)},y.prototype.addTag=function(l){let g=typeof l=="string"?gi(l):o("Git.addTag requires a tag name");return this._runTask(g,m(arguments))},y.prototype.addAnnotatedTag=function(l,g){return this._runTask(mi(l,g),m(arguments))},y.prototype.checkout=function(){let l=["checkout",...h(arguments,!0)];return this._runTask(Q(l),m(arguments))},y.prototype.checkoutBranch=function(l,g,C){return this.checkout(["-b",l,g],m(arguments))},y.prototype.checkoutLocalBranch=function(l,g){return this.checkout(["-b",l],m(arguments))},y.prototype.deleteLocalBranch=function(l,g,C){return this._runTask(Et(l,typeof g=="boolean"?g:!1),m(arguments))},y.prototype.deleteLocalBranches=function(l,g,C){return this._runTask(X(l,typeof g=="boolean"?g:!1),m(arguments))},y.prototype.branch=function(l,g){return this._runTask(R(h(arguments)),m(arguments))},y.prototype.branchLocal=function(l){return this._runTask(M(),m(arguments))},y.prototype.raw=function(l){let g=!Array.isArray(l),C=[].slice.call(g?arguments:l,0);for(let $=0;$<C.length&&g;$++)if(!p(C[$])){C.splice($,C.length-$);break}C.push(...h(arguments,0,!0));var L=m(arguments);return C.length?this._runTask(Q(C),L):this._runTask(o("Raw: must supply one or more command to execute"),L)},y.prototype.submoduleAdd=function(l,g,C){return this._runTask(pi(l,g),m(arguments))},y.prototype.submoduleUpdate=function(l,g){return this._runTask(di(h(arguments,!0)),m(arguments))},y.prototype.submoduleInit=function(l,g){return this._runTask(fi(h(arguments,!0)),m(arguments))},y.prototype.subModule=function(l,g){return this._runTask(hi(h(arguments)),m(arguments))},y.prototype.listRemote=function(){return this._runTask(oi(h(arguments)),m(arguments))},y.prototype.addRemote=function(l,g,C){return this._runTask(ni(l,g,h(arguments)),m(arguments))},y.prototype.removeRemote=function(l,g){return this._runTask(ai(l),m(arguments))},y.prototype.getRemotes=function(l,g){return this._runTask(si(l===!0),m(arguments))},y.prototype.remote=function(l,g){return this._runTask(ii(h(arguments)),m(arguments))},y.prototype.tag=function(l,g){let C=h(arguments);return C[0]!=="tag"&&C.unshift("tag"),this._runTask(Q(C),m(arguments))},y.prototype.updateServerInfo=function(l){return this._runTask(Q(["update-server-info"]),m(arguments))},y.prototype.pushTags=function(l,g){let C=ri({remote:c(l,d)},h(arguments));return this._runTask(C,m(arguments))},y.prototype.rm=function(l){return this._runTask(Q(["rm","-f",...u(l)]),m(arguments))},y.prototype.rmKeepLocal=function(l){return this._runTask(Q(["rm","--cached",...u(l)]),m(arguments))},y.prototype.catFile=function(l,g){return this._catFile("utf-8",arguments)},y.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},y.prototype._catFile=function(l,g){var C=m(g),L=["cat-file"],$=g[0];if(typeof $=="string")return this._runTask(o("Git.catFile: options must be supplied as an array of strings"),C);Array.isArray($)&&L.push.apply(L,$);let Se=l==="buffer"?bi(L):Q(L);return this._runTask(Se,C)},y.prototype.diff=function(l,g){let C=d(l)?o("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):Q(["diff",...h(arguments)]);return this._runTask(C,m(arguments))},y.prototype.diffSummary=function(){return this._runTask(Xo(h(arguments,1)),m(arguments))},y.prototype.applyPatch=function(l){let g=i(l)?F(u(l),h([].slice.call(arguments,1))):o("git.applyPatch requires one or more string patches as the first argument");return this._runTask(g,m(arguments))},y.prototype.revparse=function(){let l=["rev-parse",...h(arguments,!0)];return this._runTask(Q(l,!0),m(arguments))},y.prototype.show=function(l,g){return this._runTask(Q(["show",...h(arguments,1)]),m(arguments))},y.prototype.clean=function(l,g,C){let L=Ot(l),$=L&&l.join("")||c(l,d)||"",Se=h([].slice.call(arguments,L?1:0));return this._runTask(ft($,Se),m(arguments))},y.prototype.exec=function(l){let g={commands:[],format:"utf-8",parser(){typeof l=="function"&&l()}};return this._runTask(g)},y.prototype.clearQueue=function(){return this},y.prototype.checkIgnore=function(l,g){return this._runTask(Z(u(c(l,i,[]))),m(arguments))},y.prototype.checkIsRepo=function(l,g){return this._runTask(Ee(c(l,d)),m(arguments))},e.exports=y}}),So={};P(So,{esModuleFactory:()=>vl,gitExportFactory:()=>kl,gitInstanceFactory:()=>Oo});function vl(t){return Object.defineProperties(t,{__esModule:{value:!0},default:{value:t}})}function kl(t,e){return Object.assign(function(...r){return t.apply(null,r)},Xn,e||{})}function Oo(t,e){let r=new ts,n=wn(t&&(typeof t=="string"?{baseDir:t}:t)||{},e);if(!Ye(n.baseDir))throw new ze(n,"Cannot use simple-git on a directory that does not exist");return Array.isArray(n.config)&&r.add(uc(n.config)),r.add(pc(n.completion)),n.progress&&r.add(bc(n.progress)),n.timeout&&r.add(Tc(n.timeout)),n.spawnOptions&&r.add(Cc(n.spawnOptions)),r.add(Zn(mc(!0))),n.errors&&r.add(Zn(n.errors)),new Ao(n,r)}var Ao,No=f({"src/lib/git-factory.ts"(){cc(),Rc(),v(),Ao=bl()}}),Mo={};P(Mo,{gitP:()=>_l});function _l(...t){let e,r=Promise.resolve();try{e=Oo(...t)}catch(p){r=Promise.reject(p)}function n(){return o}function s(){return r}let o=[...Io,...Or].reduce((p,d)=>{let i=Or.includes(d),c=i?u(d,e):a(d,e,p);return Object.defineProperty(p,d,{enumerable:!1,configurable:!1,value:e?c:i?s:n}),p},{});return o;function u(p,d){return function(...i){if(typeof i[i.length]=="function")throw new TypeError("Promise interface requires that handlers are not supplied inline, trailing function not allowed in call to "+p);return r.then(function(){return new Promise(function(c,h){let m=(N,F)=>{if(N)return h(Cl(N));c(F)};i.push(m),d[p].apply(d,i)})})}}function a(p,d,i){return(...c)=>(d[p](...c),i)}}function Cl(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new mt(t)}var Io,Or,wl=f({"src/lib/runners/promise-wrapped.ts"(){wt(),No(),Io=["customBinary","env","outputHandler","silent"],Or=["add","addAnnotatedTag","addConfig","addRemote","addTag","applyPatch","binaryCatFile","branch","branchLocal","catFile","checkIgnore","checkIsRepo","checkout","checkoutBranch","checkoutLatestTag","checkoutLocalBranch","clean","clone","commit","cwd","deleteLocalBranch","deleteLocalBranches","diff","diffSummary","exec","fetch","getRemotes","init","listConfig","listRemote","log","merge","mergeFromTo","mirror","mv","pull","push","pushTags","raw","rebase","remote","removeRemote","reset","revert","revparse","rm","rmKeepLocal","show","stash","stashList","status","subModule","submoduleAdd","submoduleInit","submoduleUpdate","tag","tags","updateServerInfo"]}}),{gitP:Tl}=(wl(),E(Mo)),{esModuleFactory:xl,gitInstanceFactory:Rl,gitExportFactory:Fl}=(No(),E(So));Bo.exports=xl(Fl(Rl,{gitP:Tl}))});var Ml={};Ur(Ml,{default:()=>Nl});var Ko=k(b("@yarnpkg/core"));var Br=k(b("@yarnpkg/cli")),S=k(b("@yarnpkg/core")),Ft=k(b("@yarnpkg/fslib")),Uo=k(b("clipanion")),Go=k(b("url"));var Gr=({repoName:t})=>`https://github.com/${t}`,Ei=/^((?:https?:\/\/)?(?:.*?\/)*(.+?))(?:\#(.+))?$/;function Oe(t){let e=t.match(Ei);if(!e)throw new Error(Si(t));let[,r,n,s="default"]=e;return{path:r,name:n,treeish:s}}function Si(t){return`Input cannot be parsed as a valid repo spec ('${t}').`}var Ar=k(b("@yarnpkg/fslib")),Nr=k(Lo()),at=k(b("@yarnpkg/core")),Do=(0,Nr.default)();var xt=class{static isValidReference(e){return Do.revparse(["--verify",e])}static async fetch(e,r,n){n.report.reportInfo(at.MessageName.UNNAMED,`Cloning ${e}...`);try{await Do.clone(e,r)}catch(s){throw s.error}}constructor(e,r,n="default",s){this.name=e,this.treeish=n,this.folderPath=r,this.configuration=s}async sync(e){let r=await this.open(e),n=at.structUtils.parseIdent(this.name);e.report.reportInfo(at.MessageName.UNNAMED,`Syncing ${at.structUtils.prettyIdent(this.configuration,n)}...`),await r.pull(),await r.checkout(this.treeish)}async delete(e){if(Ar.xfs.existsSync(this.folderPath)){let r=at.structUtils.parseIdent(this.name);e.report.reportInfo(at.MessageName.UNNAMED,`Removing ${at.structUtils.prettyIdent(this.configuration,r)}...`),await Ar.xfs.removePromise(this.folderPath,{recursive:!0})}}async pnpify(e){}async open(e){return(0,Nr.default)(this.folderPath)}};var _=k(b("@yarnpkg/core")),x=k(b("@yarnpkg/fslib")),qt=k(b("@yarnpkg/parsers")),jo=k(b("clipanion"));var Pl="bunches",El=".bunchesrc.yml",Rt=".bunches",O=class{static async create(e,r,n){let s=Mr(),o=x.ppath.join(r,s);if(x.xfs.existsSync(o))throw new Error("bunches configuration already exists!");n.report.reportInfo(_.MessageName.UNNAMED,`Creating bunches manifest at: ${_.formatUtils.pretty(e,o,_.formatUtils.Type.PATH)}...`),await x.xfs.writeFilePromise(o,"");let{repos:u}=await Ir(r);return new O(r,u,e)}static async find(e,r){let{cwd:n,repos:s}=await Ir(r);return{bunch:new O(n,s,e),topLevelRepos:s,cwd:n}}static async updateRc(e,r){let n=Mr(),s=x.ppath.join(e,n),o=x.xfs.existsSync(s)?(0,qt.parseSyml)(await x.xfs.readFilePromise(s,"utf8")):{},u=!1,a;if(typeof r=="function"){try{a=r(o)}catch{a=r({})}if(a===o)return}else{a=o;for(let p of Object.keys(r)){let d=o[p],i=r[p],c;if(typeof i=="function")try{c=i(d)}catch{c=i(void 0)}else c=i;d!==c&&(a[p]=c,u=!0)}if(!u)return}await x.xfs.changeFilePromise(s,(0,qt.stringifySyml)(a),{automaticNewlines:!0})}constructor(e,r,n){this.cwd=e,this.configuration=n,this.repos=r}async pick(e){await this.touchBunch(e.report);let r=new $o(this,e);for(let n of this.repos)await r.addRepo(n);return r}async touchBunch(e){let r=x.ppath.resolve(this.cwd,Rt);return x.xfs.existsSync(r)||(e.reportInfo(_.MessageName.UNNAMED,`Creating the root bunch folder at: ${_.formatUtils.pretty(this.configuration,r,_.formatUtils.Type.PATH)}...`),await x.xfs.mkdirPromise(r)),r}async cleanUpFolder(e){let r=x.ppath.resolve(this.cwd,Rt);e.reportInfo(_.MessageName.UNNAMED,`Removing ${_.formatUtils.pretty(this.configuration,r,_.formatUtils.Type.PATH)}...`),await x.xfs.removePromise(r,{recursive:!0})}async cleanUpProjectLinks(e){let{project:r}=await _.Project.find(this.configuration,this.cwd);for(let n of r.topLevelWorkspace.getRecursiveWorkspaceChildren()){let s=x.ppath.resolve(n.cwd,Rt);e.reportInfo(_.MessageName.UNNAMED,`Unlinking ${_.formatUtils.pretty(this.configuration,n.relativeCwd,_.formatUtils.Type.PATH)}...`);try{await x.xfs.unlinkPromise(s)}catch{continue}}}},$o=class{constructor(e,r){this.bunch=e,this.ctx=r,this.repos=[],this.reposByName=new Map}async syncRepos(){for(let e of this.repos)this.ctx.report.reportJson({name:e.name,reference:e.treeish}),await e.sync(this.ctx)}async addRepo(e,r){let n,s,o,u;if(typeof e=="string"){let a=Oe(e);n=a.name,s=a.path,o=a.treeish,u=x.ppath.join(Rt,n)}else{let a=Oe(e.spec);n=a.name,s=e.spec,o=a.treeish,u=e.path}if(r||!this.reposByName.has(n)){let a=x.ppath.join(this.bunch.cwd,u);if(r&&x.xfs.existsSync(a)&&await x.xfs.removePromise(a,{recursive:!0}),!x.xfs.existsSync(a)){let d=_.structUtils.parseIdent(n);r?this.ctx.report.reportInfo(_.MessageName.UNNAMED,`Replacing repository on disk: ${_.structUtils.prettyIdent(this.bunch.configuration,d)}`):this.ctx.report.reportInfo(_.MessageName.UNNAMED,`Repository not found on disk: ${_.structUtils.prettyIdent(this.bunch.configuration,d)}`),await xt.fetch(s,a,this.ctx),await this.addLink(a)}let p=new xt(n,a,o,this.bunch.configuration);this.reposByName.set(n,p),this.repos.push(p)}else{let a=this.reposByName[n];if(a.treeish!==o)throw new Error(Ol(n,a.treeish,o))}return u}async removeRepo(e){let r=this.reposByName.get(e);if(!r){let n=_.formatUtils.mark(this.bunch.configuration),s=_.structUtils.parseIdent(e);return this.ctx.report.reportError(_.MessageName.INVALID_PLUGIN_REFERENCE,`${n.Cross} The current configuration doesn't reference ${_.structUtils.prettyIdent(this.bunch.configuration,s)}`),r}return await r.delete(this.ctx),r}async lockRepos({sync:e=!0}={}){this.ctx.report.reportInfo(_.MessageName.UNNAMED,`Locking bunch repos in ${_.formatUtils.pretty(this.bunch.configuration,this.bunch.cwd,_.formatUtils.Type.PATH)}...`);for(let r of this.repos){e&&await r.sync(this.ctx);let{repos:n}=await Ir(r.folderPath);for(let s of n)await this.addRepo(s)}}async addLink(e){if(!x.xfs.existsSync(e)){let r=x.ppath.relative(this.bunch.cwd,e),n=x.ppath.resolve(this.bunch.cwd,Rt),s=x.ppath.resolve(e,Rt);this.ctx.report.reportInfo(_.MessageName.UNNAMED,`Linking ${_.formatUtils.pretty(this.bunch.configuration,r,_.formatUtils.Type.PATH)}...`),await x.xfs.symlinkPromise(n,s,"dir")}}async addAllLinks(){let{project:e}=await _.Project.find(this.bunch.configuration,this.bunch.cwd);for(let r of e.topLevelWorkspace.getRecursiveWorkspaceChildren())this.addLink(r.cwd)}};function Mr(){let t=`${Pl}rc_filename`;for(let[e,r]of Object.entries(process.env))if(e.toLowerCase()===t&&typeof r=="string")return r;return El}async function Sl(t){let e=Mr(),r=[],n=t,s=null;for(;n!==s&&!n.endsWith(".bunches");){s=n;let o=x.ppath.join(s,e);if(x.xfs.existsSync(o)){let u=await x.xfs.readFilePromise(o,"utf8"),a;try{a=(0,qt.parseSyml)(u)}catch(p){let d="";throw u.match(/^\s+(?!-)[^:]+\s+\S+/m)&&(d=" (in particular, make sure you list the colons after each key name)"),new jo.UsageError(`Parse error when loading ${o}; please check it's proper Yaml${d}`)}r.push({path:o,cwd:s,data:a})}n=x.ppath.dirname(s)}return r}async function Ir(t){let e=await Sl(t),r=[],n;for(let{data:s,cwd:o}of e)if(n||(n=o),s.bunches)for(let u of s.bunches)r.push(u);return n||(n=t),{cwd:n,repos:r}}function Ol(t,e,r,n="the project root"){return`Bunch "${t}" is already instantiated at "${e}", while ${n} requested "${r}".`}var Wt=class extends Br.BaseCommand{constructor(){super(...arguments);this.name=Uo.Option.String()}async execute(){let e=await S.Configuration.find(this.context.cwd,this.context.plugins),{bunch:r}=await O.find(e,this.context.cwd);return(await S.StreamReport.start({configuration:e,stdout:this.context.stdout},async s=>{let o=await r.pick({report:s,stdin:this.context.stdin,stdout:this.context.stdout});await o.lockRepos();let u;if(this.name.match(/^\.{0,2}[\\/]/)||Ft.npath.isAbsolute(this.name)){let i=Ft.ppath.resolve(this.context.cwd,Ft.npath.toPortablePath(this.name));s.reportInfo(S.MessageName.UNNAMED,`Reading ${S.formatUtils.pretty(e,i,S.formatUtils.Type.PATH)}`),u=Ft.ppath.relative(r.cwd,i)}else if(this.name.match(/^https?:/)){try{new Go.URL(this.name)}catch{throw new S.ReportError(S.MessageName.INVALID_PLUGIN_REFERENCE,`Bunch specifier "${this.name}" is neither a bunch name nor a valid url`)}u=this.name}else{let i=S.structUtils.parseLocator(this.name);if(i.reference!=="unknown"&&!xt.isValidReference(i.reference))throw new S.ReportError(S.MessageName.UNNAMED,"Bunches only accept git idioms as references. Semver ranges are not supported.");i.reference==="unknown"&&(i.reference="default");let c=S.structUtils.stringifyIdent(i);u=Gr({repoName:c})}s.reportInfo(S.MessageName.UNNAMED,`Adding ${S.formatUtils.pretty(e,u,S.formatUtils.Type.PATH)}...`);let a=await o.addRepo(u,!0),p={spec:u,path:a};s.reportInfo(S.MessageName.UNNAMED,"Updating the configuration..."),await O.updateRc(r.cwd,i=>{let c=[],h=!1;for(let m of i.bunches||[])(typeof m=="string"?m:m.path)!==a?c.push(m):(c.push(p),h=!0);return h||c.push(p),Jt(bt({},i),{bunches:c})});let d=S.formatUtils.mark(e);s.reportInfo(S.MessageName.UNNAMED,`${d.Check} Added ${S.formatUtils.pretty(e,a,S.formatUtils.Type.PATH)}!`)})).exitCode()}};Wt.paths=[["bunch","add"]],Wt.usage=Br.BaseCommand.Usage({category:"Bunch-related commands",description:"Depend on a bunch",details:`
      This command clones the specified bunch from its remote location and updates the configuration to reference it in workspace packages.

      A valid Bunch path is:
      - The github repo name
      - a source control path
      - A file path

      Bunches can be annotated with:

      - Branch
      - Tag
      - Commit

      Bunches cannot be downloaded from the npm registry.
    `,examples:[["Clone and activate a bunch by URL","$0 bunch add git@github.com:org/team-bunch.git"],['Clone and activate "org" bunch (shorthand)',"$0 bunch add org/team-bunch"],['Clone and activate the "experimental" branch',"$0 bunch add org/team-bunch#experimental"]]});var qo=k(b("@yarnpkg/cli")),J=k(b("@yarnpkg/core")),we=k(b("clipanion"));var zt=class extends qo.BaseCommand{constructor(){super(...arguments);this.name=we.Option.String()}async execute(){let e=await J.Configuration.find(this.context.cwd,this.context.plugins),{bunch:r}=await O.find(e,this.context.cwd);return(await J.StreamReport.start({configuration:e,stdout:this.context.stdout},async s=>{let o=this.name,a=await(await r.pick({report:s,stdin:this.context.stdin,stdout:this.context.stdout})).removeRepo(o);if(!a)return s.reportInfo(J.MessageName.UNNAMED,"\u{1F4A4} Nothing to do.");s.reportInfo(J.MessageName.UNNAMED,"Updating the configuration..."),await O.updateRc(r.cwd,d=>{if(!Array.isArray(d.bunches))return d;let i=d.bunches.filter(c=>!a.folderPath.endsWith(c.path));return d.bunches.length===i.length?d:Jt(bt({},d),{bunches:i})});let p=J.formatUtils.mark(e);s.reportInfo(J.MessageName.UNNAMED,`${p.Check} Removed ${J.formatUtils.pretty(e,a.folderPath,J.formatUtils.Type.PATH)}!`)})).exitCode()}};zt.paths=[["bunch","remove"]],zt.usage=we.Command.Usage({category:"Bunch-related commands",description:"remove a bunch",details:`
      This command deletes the specified bunch from the .bunches folder and removes it from the configuration.

      **Note:** The bunches have to be referenced by their name property, which can be obtained using the \`yarn bunches\` command. Shorthands are not allowed.
   `,examples:[["Remove a bunch added to .bunches","$0 bunch remove org/team-bunch"]]});var Wo=k(b("@yarnpkg/cli")),st=k(b("@yarnpkg/core")),Te=k(b("clipanion"));var Ht=class extends Wo.BaseCommand{constructor(){super(...arguments);this.json=Te.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"})}async execute(){let e=await st.Configuration.find(this.context.cwd,this.context.plugins),{bunch:r,topLevelRepos:n}=await O.find(e,this.context.cwd),{project:s}=await st.Project.find(e,this.context.cwd),o=s.topLevelWorkspace.manifest.name.name;return(await st.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout},async a=>{let p=await r.pick({report:a,stdin:this.context.stdin,stdout:this.context.stdout});a.reportInfo(st.MessageName.UNNAMED,`Finding bunches in ${o}...`),p.repos.length?await p.lockRepos({sync:!1}):a.reportInfo(st.MessageName.UNNAMED,"\u{1F914} No bunches to list.");for(let d of p.reposByName.keys()){let i=n.find(h=>h.path.endsWith(d)),c=d;i&&(c+=" [root]"),a.reportJson({name:d,builtin:i}),a.reportInfo(st.MessageName.UNNAMED,`${c}`)}})).exitCode()}};Ht.paths=[["bunches"]],Ht.usage=Te.Command.Usage({category:"Bunch-related commands",description:"list the active bunches",details:`
      This command prints the currently checked-out bunches. Will display both builtin bunches and external bunches.
    `,examples:[["List the currently active bunches","$0 bunches"]]});var zo=k(b("@yarnpkg/cli")),xe=k(b("@yarnpkg/core")),Re=k(b("clipanion"));var Vt=class extends zo.BaseCommand{constructor(){super(...arguments);this.full=Re.Option.Boolean("--full",!1,{description:"Remove the .bunches folder entirely"})}async execute(){let e=await xe.Configuration.find(this.context.cwd,this.context.plugins),{bunch:r}=await O.find(e,this.context.cwd);return(await xe.StreamReport.start({configuration:e,stdout:this.context.stdout},async s=>{await r.cleanUpProjectLinks(s),this.full&&await r.cleanUpFolder(s)})).exitCode()}};Vt.paths=[["bunches","clean"]],Vt.usage=Re.Command.Usage({category:"Bunch-related commands",description:"clean the active bunches",details:`
      This command removes symlinks from all active bunches.
    `,examples:[["Clean the currently active bunches","$0 bunches clean"]]});var Ho=k(b("@yarnpkg/cli")),V=k(b("@yarnpkg/core")),Fe=k(b("clipanion"));var Qt=class extends Ho.BaseCommand{constructor(){super(...arguments);this.json=Fe.Option.Boolean("--json",!1,{description:"Format the output as an NDJSON stream"})}async execute(){let e=await V.Configuration.find(this.context.cwd,this.context.plugins),r=V.formatUtils.mark(e),{bunch:n}=await O.find(e,this.context.cwd),{project:s}=await V.Project.find(e,this.context.cwd),o=s.topLevelWorkspace.manifest.name.name;return(await V.StreamReport.start({configuration:e,json:this.json,stdout:this.context.stdout},async a=>{let p=await n.pick({report:a,stdin:this.context.stdin,stdout:this.context.stdout});a.reportInfo(V.MessageName.UNNAMED,`Syncing bunches in ${o}...`),p.repos.length?(await p.lockRepos(),await p.addAllLinks()):a.reportInfo(V.MessageName.UNNAMED,"\u{1F4A4} No bunches to sync."),a.reportInfo(V.MessageName.UNNAMED,`${r.Check} Done Syncing ${o}!`),a.reportInfo(V.MessageName.UNNAMED,`${r.Question} Synced ${p.repos.length} repos!`)})).exitCode()}};Qt.paths=[["bunches","sync"]],Qt.usage=Fe.Command.Usage({category:"Bunch-related commands",description:"sync the active bunches",details:`
      This command syncs the currently checked-out bunches. Bunches locked to Tags and Commits will be ignored. Bunches locked to a Branch will be fast-forwarded.
    `,examples:[["Sync the currently active bunches","$0 bunches sync"]]});var Vo=k(b("@yarnpkg/cli")),Pt=k(b("@yarnpkg/core")),Qo=k(b("clipanion"));var Yt=class extends Vo.BaseCommand{async execute(){let e=await Pt.Configuration.find(this.context.cwd,this.context.plugins);return(await Pt.StreamReport.start({configuration:e,stdout:this.context.stdout},async n=>{await O.create(e,this.context.cwd,{report:n,stdin:this.context.stdin,stdout:this.context.stdout}),n.reportInfo(Pt.MessageName.UNNAMED,"Bunch Created!")})).exitCode()}};Yt.paths=[["bunch","init"]],Yt.usage=Qo.Command.Usage({category:"Bunch-related commands",description:"init bunch",details:`
      This command adds an empty .bunchesrc.yml.
    `,examples:[["Initialize a bunch","$0 bunch init"]]});var Yo=k(b("@yarnpkg/cli")),Pe=k(b("clipanion")),Kt=class extends Yo.BaseCommand{constructor(){super(...arguments);this.name=Pe.Option.String({name:"Workspace Name"})}async execute(){return this.cli.run(["workspace",this.name,"exec","pwd"])}};Kt.paths=[["locate"]],Kt.usage=Pe.Command.Usage({category:"Workspace commands",description:"shows workspace path",details:`
      Print the absolute path to a specific package in the worktree.
    `,examples:[['Print the path to "package"',"$0 locate package"]]});var Al={hooks:{validateProject:async t=>{let{bunch:e}=await O.find(t.configuration,t.cwd);e&&await Ko.StreamReport.start({configuration:t.configuration,stdout:process.stdout},async r=>{await(await e.pick({report:r,stdin:process.stdin,stdout:process.stdout})).lockRepos({sync:!0})})},cleanGlobalArtifacts:async(t,e)=>{let{bunch:r}=await O.find(t.configuration,t.cwd);r&&(await r.cleanUpFolder(e),await r.cleanUpProjectLinks(e))}},commands:[Yt,Kt,Ht,Qt,Vt,Wt,zt]},Nl=Al;return Ml;})();
return plugin;
}
};
